<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Projekt & Tid - Stadsbyggnadsförvaltningen</title>
  <link rel="stylesheet" href="styles.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <header class="app-header">
    <div class="brand">
      <div class="brand-mark"><span class="brand-initials">HBG</span></div>
      <div class="brand-text">
        <h1>PROJEKT & TID</h1>
        <p>Stadsbyggnadsförvaltningen – demo</p>
      </div>
    </div>
    <nav class="main-nav">
      <button class="nav-btn active" data-view="view-overview">Översikt</button>
      <button class="nav-btn" data-view="view-time">Tidregistrering</button>
      <button class="nav-btn" data-view="view-admin">Projekt & medarbetare</button>
      <button class="nav-btn" data-view="view-dashboard">Dashboard</button>
      <button class="nav-btn" data-view="view-pps">PPS</button>
    </nav>
  </header>

  <main class="app-main">
    <!-- Översikt -->
    <section id="view-overview" class="view active">
      <div class="view-header">
        <h2>Översikt</h2>
        <p>Snabb vy över projekt, medarbetare, timmar och kostnader.</p>
      </div>

      <section class="grid-3 overview-section">
        <div class="card kpi-card">
          <h3>Antal projekt</h3>
          <p class="kpi-value" id="ov-kpi-projects">0</p>
          <p class="kpi-sub">Aktiva projekt i systemet</p>
        </div>
        <div class="card kpi-card">
          <h3>Antal medarbetare</h3>
          <p class="kpi-value" id="ov-kpi-people">0</p>
          <p class="kpi-sub">Medverkande i projekten</p>
        </div>
        <div class="card kpi-card">
          <h3>Rapporterade timmar</h3>
          <p class="kpi-value" id="ov-kpi-hours">0</p>
          <p class="kpi-sub">Totalt registrerade timmar</p>
        </div>
      </section>

      <section class="grid-2 overview-section">
        <section class="card">
          <header class="card-header">
            <div>
              <h3>Snabbvy per projekt</h3>
              <p>Hur många timmar och ungefärlig kostnad per projekt.</p>
            </div>
          </header>
          <div class="table-wrapper">
            <table class="data-table" id="ov-table-projects">
              <thead>
                <tr>
                  <th>Projekt</th>
                  <th>Timmar</th>
                  <th>Kostnad (SEK)</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
        </section>

        <section class="card">
          <header class="card-header">
            <div>
              <h3>Snabbvy per medarbetare</h3>
              <p>Hur mycket varje person har rapporterat totalt.</p>
            </div>
          </header>
          <div class="table-wrapper">
            <table class="data-table" id="ov-table-people">
              <thead>
                <tr>
                  <th>Medarbetare</th>
                  <th>Timmar</th>
                  <th>Kostnad (SEK)</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
        </section>
      </section>

      <section class="card overview-section">
        <header class="card-header">
          <div>
            <h3>Sammanfattning</h3>
            <p>En enkel ögonblicksbild du kan använda i dialog med chef eller styrgrupp.</p>
          </div>
        </header>
        <p class="overview-summary-text">
          Översikten visar hur resurserna fördelas mellan projekt och medarbetare. Den kan fungera som
          underlag för beslut kring prioriteringar, belastning och vilka projekt som driver mest kostnad.
        </p>
      </section>
    </section>

    <!-- Tidregistrering -->
    <section id="view-time" class="view">
      <div class="view-header">
        <h2>Tidregistrering</h2>
        <p>Registrera tid per projekt och medarbetare. Anpassad för mobil och dator.</p>
      </div>

      <form id="time-form" class="card form-card">
        <h3>Lägg till tidrad</h3>
        <div class="form-grid">
          <div class="form-field">
            <label for="time-date">Datum</label>
            <input type="date" id="time-date" required />
          </div>
          <div class="form-field">
            <label for="time-person">Medarbetare</label>
            <select id="time-person" required></select>
          </div>
          <div class="form-field">
            <label for="time-project">Projekt</label>
            <select id="time-project" required></select>
          </div>
          <div class="form-field">
            <label for="time-hours">Antal timmar</label>
            <input type="number" id="time-hours" min="0" step="0.25" required />
          </div>
          <div class="form-field">
            <label for="time-activity">Aktivitetstyp</label>
            <select id="time-activity">
              <option value="Projektering">Projektering</option>
              <option value="Möte">Möte</option>
              <option value="Samråd">Samråd</option>
              <option value="Administration">Administration</option>
              <option value="Annat">Annat</option>
            </select>
          </div>
          <div class="form-field full">
            <label for="time-comment">Kommentar (valfri)</label>
            <textarea id="time-comment" rows="2"></textarea>
          </div>
        </div>
        <div class="form-actions">
          <span class="form-message" id="time-message"></span>
          <button type="submit" class="primary-btn">Spara tidrad</button>
        </div>
      </form>

      <section class="card">
        <header class="card-header">
          <div>
            <h3>Senaste tidrader</h3>
            <p>En översikt över de senaste registreringarna.</p>
          </div>
          <div class="table-filter">
            <label for="recent-limit">Visa</label>
            <select id="recent-limit">
              <option value="10">10</option>
              <option value="25">25</option>
              <option value="50">50</option>
            </select>
            <span>rader</span>
          </div>
        </header>
        <div class="table-wrapper">
          <table class="data-table" id="recent-entries-table">
            <thead>
              <tr>
                <th>Datum</th>
                <th>Medarbetare</th>
                <th>Projekt</th>
                <th>Timmar</th>
                <th>Aktivitet</th>
                <th>Kommentar</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </section>
    </section>

    <!-- Projekt & medarbetare -->
    <section id="view-admin" class="view">
      <div class="view-header">
        <h2>Projekt & medarbetare</h2>
        <p>Hantera vilka projekt och personer som kan användas vid tidregistrering.</p>
      </div>

      <div class="grid-2">
        <section class="card">
          <header class="card-header">
            <div>
              <h3>Projekt</h3>
              <p>Lägg till eller uppdatera projekt.</p>
            </div>
          </header>
          <form id="project-form" class="sub-form">
            <div class="form-grid">
              <div class="form-field full">
                <label for="project-name">Projektnamn</label>
                <input type="text" id="project-name" required />
              </div>
              <div class="form-field">
                <label for="project-code">Projektkod (valfri)</label>
                <input type="text" id="project-code" />
              </div>
              <div class="form-field">
                <label for="project-rate">Timpris (SEK)</label>
                <input type="number" id="project-rate" min="0" step="50" placeholder="900" />
              </div>
              <div class="form-field">
                <label for="project-status">Status</label>
                <select id="project-status">
                  <option value="active">Aktivt</option>
                  <option value="inactive">Avslutat</option>
                </select>
              </div>
            </div>
            <div class="form-actions">
              <span class="form-message" id="project-message"></span>
              <button type="submit" class="secondary-btn">Lägg till projekt</button>
            </div>
          </form>

          <div class="table-wrapper">
            <table class="data-table" id="projects-table">
              <thead>
                <tr>
                  <th>Namn</th>
                  <th>Kod</th>
                  <th>Status</th>
                  <th>Timpris</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
        </section>

        <section class="card">
          <header class="card-header">
            <div>
              <h3>Medarbetare</h3>
              <p>Lägg till eller uppdatera medarbetare.</p>
            </div>
          </header>
          <form id="person-form" class="sub-form">
            <div class="form-grid">
              <div class="form-field full">
                <label for="person-name">Namn</label>
                <input type="text" id="person-name" required />
              </div>
              <div class="form-field full">
                <label for="person-role">Roll / funktion</label>
                <input type="text" id="person-role" placeholder="t.ex. Planarkitekt" />
              </div>
              <div class="form-field">
                <label for="person-rate">Timpris (SEK, valfritt)</label>
                <input type="number" id="person-rate" min="0" step="50" placeholder="Lämna tomt för standard" />
              </div>
              <div class="form-field">
                <label for="person-active">Status</label>
                <select id="person-active">
                  <option value="true">Aktiv</option>
                  <option value="false">Inaktiv</option>
                </select>
              </div>
            </div>
            <div class="form-actions">
              <span class="form-message" id="person-message"></span>
              <button type="submit" class="secondary-btn">Lägg till medarbetare</button>
            </div>
          </form>

          <div class="table-wrapper">
            <table class="data-table" id="people-table">
              <thead>
                <tr>
                  <th>Namn</th>
                  <th>Roll</th>
                  <th>Status</th>
                  <th>Timpris</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
        </section>
      </div>
    </section>

    <!-- Dashboard -->
    <section id="view-dashboard" class="view">
      <div class="view-header">
        <h2>Dashboard & rapport</h2>
        <p>Få en snabb bild av arbetstid och kostnad per projekt och medarbetare.</p>
      </div>

      <section class="card filter-card">
        <h3>Filter</h3>
        <div class="form-grid">
          <div class="form-field">
            <label for="filter-from">Från datum</label>
            <input type="date" id="filter-from">
          </div>
          <div class="form-field">
            <label for="filter-to">Till datum</label>
            <input type="date" id="filter-to">
          </div>
          <div class="form-field">
            <label for="filter-project">Projekt (valfritt)</label>
            <select id="filter-project">
              <option value="">Alla projekt</option>
            </select>
          </div>
          <div class="form-field">
            <label for="filter-person">Medarbetare (valfritt)</label>
            <select id="filter-person">
              <option value="">Alla medarbetare</option>
            </select>
          </div>
        </div>
        <div class="form-actions">
          <button id="filter-apply" class="primary-btn">Uppdatera rapport</button>
          <button id="filter-clear" class="ghost-btn">Rensa filter</button>
        </div>
      </section>

      <section class="grid-3">
        <div class="card kpi-card">
          <h3>Totala timmar</h3>
          <p class="kpi-value" id="kpi-hours">0</p>
          <p class="kpi-sub">Inom vald period</p>
        </div>
        <div class="card kpi-card">
          <h3>Beräknad kostnad</h3>
          <p class="kpi-value" id="kpi-cost">0 kr</p>
          <p class="kpi-sub">Baserat på timpris</p>
        </div>
        <div class="card kpi-card">
          <h3>Antal tidrader</h3>
          <p class="kpi-value" id="kpi-entries">0</p>
          <p class="kpi-sub">Registrerade rader</p>
        </div>
      </section>

      <section class="grid-2">
        <section class="card">
          <header class="card-header">
            <div>
              <h3>Timmar per projekt</h3>
              <p>Summan av timmar per projekt inom vald period.</p>
            </div>
          </header>
          <div class="chart-wrapper">
            <canvas id="chart-projects"></canvas>
          </div>
          <div class="table-wrapper">
            <table class="data-table" id="table-projects">
              <thead>
                <tr>
                  <th>Projekt</th>
                  <th>Timmar</th>
                  <th>Kostnad (SEK)</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
        </section>

        <section class="card">
          <header class="card-header">
            <div>
              <h3>Timmar per medarbetare</h3>
              <p>Summan av timmar per person inom vald period.</p>
            </div>
          </header>
          <div class="chart-wrapper">
            <canvas id="chart-people"></canvas>
          </div>
          <div class="table-wrapper">
            <table class="data-table" id="table-people">
              <thead>
                <tr>
                  <th>Medarbetare</th>
                  <th>Timmar</th>
                  <th>Kostnad (SEK)</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
        </section>
      </section>
    </section>

    <!-- PPS -->
    <section id="view-pps" class="view">
      <div class="view-header">
        <h2>PPS – Praktisk ProjektStyrning</h2>
        <p>En visuell genomgång av PPS-modellen, dess faser och beslutspunkter.</p>
      </div>

      <section class="card pps-intro pps-section">
        <h3>Vad är PPS?</h3>
        <p>
          PPS (Praktisk ProjektStyrning) är en projektmodell utvecklad av Tietoevry. Modellen används brett i offentlig sektor
          och fokuserar på tydliga beslutspunkter, roller, mål och uppföljning.
        </p>
        <p>
          Här får du en översikt över hur PPS är uppbyggt, vilka beslutspunkter (Decision Points, DP) som finns och
          vad som krävs för att starta och driva ett projekt på ett kontrollerat sätt.
        </p>
      </section>

      <section class="card pps-section">
        <header class="card-header">
          <div>
            <h3>Projektets resa enligt PPS</h3>
            <p>En “kortfilm” i fem scener – från idé till effekthemtagning.</p>
          </div>
        </header>
        <div class="pps-film-strip">
          <div class="pps-scene">
            <div class="pps-scene-badge">Scen 1</div>
            <h4>Förbereda</h4>
            <p>En idé eller ett behov uppstår. Vi beskriver varför projektet behövs och vad som händer om vi inte gör något.</p>
            <span class="pps-scene-dp">→ Beslutspunkt: DP1</span>
          </div>
          <div class="pps-scene">
            <div class="pps-scene-badge">Scen 2</div>
            <h4>Starta</h4>
            <p>Projektet definieras ordentligt: mål, omfattning, roller, risker, plan och budget tas fram.</p>
            <span class="pps-scene-dp">→ Beslutspunkt: DP2</span>
          </div>
          <div class="pps-scene">
            <div class="pps-scene-badge">Scen 3</div>
            <h4>Genomföra</h4>
            <p>Leveranser tas fram enligt plan. Status följs upp och planen justeras vid behov.</p>
            <span class="pps-scene-dp">→ Beslutspunkt: DP3</span>
          </div>
          <div class="pps-scene">
            <div class="pps-scene-badge">Scen 4</div>
            <h4>Avsluta</h4>
            <p>Leveranser godkänns, dokumentation färdigställs och projektet avslutas formellt.</p>
            <span class="pps-scene-dp">→ Beslutspunkt: DP4</span>
          </div>
          <div class="pps-scene">
            <div class="pps-scene-badge">Scen 5</div>
            <h4>Effektuera</h4>
            <p>Vi följer upp om effekterna faktiskt uppnåtts och hur väl lösningen används.</p>
            <span class="pps-scene-dp">→ Beslutspunkt: DP5</span>
          </div>
        </div>
      </section>

      <section class="card pps-section">
        <header class="card-header">
          <div>
            <h3>Decision Points (DP1–DP5)</h3>
            <p>Vad styrgruppen beslutar om vid varje beslutspunkt.</p>
          </div>
        </header>
        <div class="pps-timeline">
          <div class="pps-step">
            <div class="pps-step-header">
              <div class="pps-step-icon">DP1</div>
              <div>
                <h4>Beslut att initiera förstudie / projektförberedelse</h4>
                <p class="pps-step-sub">“Är idén värd att utreda?”</p>
              </div>
            </div>
            <ul>
              <li>Tydlig beskrivning av behov / problem / möjlighet.</li>
              <li>Grov nytto- och konsekvensbild (vad händer om vi inte gör något?).</li>
              <li>Förslag på målbild och inriktning.</li>
              <li>Beslut: genomföra förstudie/projektförberedelse.</li>
            </ul>
          </div>

          <div class="pps-step">
            <div class="pps-step-header">
              <div class="pps-step-icon">DP2</div>
              <div>
                <h4>Beslut att starta projekt</h4>
                <p class="pps-step-sub">“Har vi ett tillräckligt bra underlag för att starta?”</p>
              </div>
            </div>
            <ul>
              <li>Projektdefinition framtagen (mål, omfattning, avgränsningar, roller, risker).</li>
              <li>Plan och budget är framtagna och genomförbara.</li>
              <li>Projektledare, styrgrupp och nyckelresurser är utsedda.</li>
              <li>Risker och beroenden är identifierade och hanterade.</li>
              <li>Beslut: starta projekt.</li>
            </ul>
          </div>

          <div class="pps-step">
            <div class="pps-step-header">
              <div class="pps-step-icon">DP3</div>
              <div>
                <h4>Beslut att fortsätta / omplanera</h4>
                <p class="pps-step-sub">“Ligger vi rätt – eller behöver vi ändra inriktning?”</p>
              </div>
            </div>
            <ul>
              <li>Status mot plan: tid, kostnad, kvalitet och omfattning.</li>
              <li>Uppdaterad risk- och konsekvensbedömning.</li>
              <li>Förslag till eventuella ändringar i plan, scope eller resursläge.</li>
              <li>Beslut: fortsätta, omplanera eller avbryta.</li>
            </ul>
          </div>

          <div class="pps-step">
            <div class="pps-step-header">
              <div class="pps-step-icon">DP4</div>
              <div>
                <h4>Beslut att avsluta projektet</h4>
                <p class="pps-step-sub">“Är projektet levererat och överlämnat?”</p>
              </div>
            </div>
            <ul>
              <li>Leveranser är godkända av beställare/verksamhet.</li>
              <li>Slutrapport framtagen (utfall mot plan, lärdomar).</li>
              <li>Förvaltning/linje tar emot ansvar för lösning/leverans.</li>
              <li>Beslut: projektet är avslutat.</li>
            </ul>
          </div>

          <div class="pps-step">
            <div class="pps-step-header">
              <div class="pps-step-icon">DP5</div>
              <div>
                <h4>Beslut om effekthemtagning</h4>
                <p class="pps-step-sub">“Har vi fått den nytta vi tänkte?”</p>
              </div>
            </div>
            <ul>
              <li>Utvärdering av effektmål och nyttorealisering.</li>
              <li>Analys av användning, beteendeförändring och resultat.</li>
              <li>Ev. åtgärder för att förstärka effekterna.</li>
              <li>Beslut: effekthemtagning godkänd.</li>
            </ul>
          </div>
        </div>
      </section>

      <section class="card pps-section">
        <header class="card-header">
          <div>
            <h3>Checklista för projektstart enligt PPS (DP2)</h3>
            <p>Det här ska vara på plats innan ni trycker på “Starta projekt”.</p>
          </div>
        </header>
        <div class="pps-checklist">
          <div class="pps-checklist-column">
            <h4>Innehåll i projektdefinition</h4>
            <ul>
              <li>Bakgrund och syfte.</li>
              <li>Effektmål (vilken nytta ska uppnås?).</li>
              <li>Projektmål (vad ska levereras?).</li>
              <li>Avgränsningar och prioriteringar.</li>
              <li>Intressenter och beroenden.</li>
              <li>Övergripande risker och osäkerheter.</li>
            </ul>
          </div>
          <div class="pps-checklist-column">
            <h4>Styrning och resurser</h4>
            <ul>
              <li>Projektledare utsedd och tillgänglig.</li>
              <li>Styrgrupp med tydliga roller.</li>
              <li>Resurser från berörda enheter verifierade.</li>
              <li>Budget och finansiering klargjord.</li>
              <li>Grov tidplan och milstolpar satta.</li>
            </ul>
          </div>
          <div class="pps-checklist-column">
            <h4>Beslut och kommunikation</h4>
            <ul>
              <li>Förankring hos beställare och verksamhet.</li>
              <li>Kommunikationsinriktning klar (vem behöver veta vad, när?).</li>
              <li>Risker som kräver ledningsbeslut lyfta och hanterade.</li>
              <li>Styrgruppen har tagit formellt DP2-beslut.</li>
            </ul>
          </div>
        </div>
      </section>
    </section>
  </main>

  <footer class="app-footer">
    <p>Prototype · Projekt & tid · Helsingborgs stad (demo) · Data lagras endast lokalt i din webbläsare.</p>
  </footer>

  <script src="app.js"></script>
</body>
</html>
